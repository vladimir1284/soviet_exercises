@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light theme - Warm neutrals */
    --surface-50: 250 250 249;
    --surface-100: 245 245 244;
    --surface-200: 231 229 228;
    --surface-300: 214 211 209;
    --surface-400: 168 162 158;
    --surface-500: 120 113 108;
    --surface-600: 87 83 78;
    --surface-700: 68 64 60;
    --surface-800: 41 37 36;
    --surface-900: 28 25 23;
    --surface-950: 12 10 9;

    /* Accent - Vibrant indigo */
    --accent: 99 102 241;
    --accent-hover: 79 70 229;

    color-scheme: light;
  }

  .dark {
    /* Dark theme - Cool neutrals */
    --surface-50: 24 24 27;
    --surface-100: 39 39 42;
    --surface-200: 63 63 70;
    --surface-300: 82 82 91;
    --surface-400: 113 113 122;
    --surface-500: 161 161 170;
    --surface-600: 212 212 216;
    --surface-700: 228 228 231;
    --surface-800: 244 244 245;
    --surface-900: 250 250 250;
    --surface-950: 255 255 255;

    color-scheme: dark;
  }

  html {
    -webkit-tap-highlight-color: transparent;
    scroll-behavior: smooth;
  }

  body {
    @apply transition-colors duration-300;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-surface-300 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-surface-400;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-accent ring-offset-2 ring-offset-surface-50;
  }

  /* Safe area padding for notched devices */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
}

@layer components {
  /* Card styles - FIXED: removed bg-white, now uses surface variables */
  .card {
    @apply bg-surface-50 rounded-2xl shadow-soft border border-surface-200/50;
  }

  .card-interactive {
    @apply card transition-all duration-200 hover:shadow-soft-lg hover:scale-[1.01] active:scale-[0.99];
  }

  /* Button base */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium rounded-xl transition-all duration-200 active:scale-[0.97] disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn bg-accent text-white hover:bg-accent-hover shadow-lg shadow-accent/25;
  }

  /* Button secondary - FIXED: removed redundant dark classes, text now adapts */
  .btn-secondary {
    @apply btn bg-surface-200 text-surface-800 hover:bg-surface-300;
  }

  /* Button ghost - FIXED: simplified, variables handle theme switching */
  .btn-ghost {
    @apply btn hover:bg-surface-200/50 text-surface-600;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  .btn-md {
    @apply px-4 py-2.5 text-sm;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  .btn-icon {
    @apply p-2.5 aspect-square;
  }

  /* Input styles - FIXED: removed redundant dark classes */
  .input {
    @apply w-full px-4 py-3 bg-surface-100 border border-surface-200 rounded-xl text-surface-900 placeholder:text-surface-400 transition-all duration-200 focus:border-accent focus:ring-2 focus:ring-accent/20;
  }

  /* Progress ring */
  .progress-ring {
    transform: rotate(-90deg);
    transform-origin: 50% 50%;
  }

  .progress-ring-circle {
    transition: stroke-dashoffset 0.5s ease-out;
  }

  /* Glassmorphism - FIXED: removed bg-white, now uses surface variables */
  .glass {
    @apply bg-surface-50/70 backdrop-blur-xl border border-surface-200/20;
  }

  /* Bottom navigation */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 glass safe-bottom border-t border-surface-200/50;
  }

  /* Page container */
  .page-container {
    @apply min-h-screen pb-24 safe-top safe-left safe-right;
  }

  /* Section header - FIXED: simplified */
  .section-header {
    @apply text-xs font-semibold uppercase tracking-wider text-surface-500 mb-3 px-1;
  }

  /* Number display */
  .num-display {
    @apply font-display font-bold tabular-nums;
  }

  /* Skeleton loading - FIXED: removed redundant dark class */
  .skeleton {
    @apply bg-surface-200 animate-pulse rounded;
  }
}

@layer utilities {
  /* Hide scrollbar */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-accent to-purple-500;
  }

  /* Tap feedback */
  .tap-highlight {
    -webkit-tap-highlight-color: rgba(99, 102, 241, 0.1);
  }
}
